[{"name":"app.R","content":"#\r\n# This is a Shiny web application. You can run the application by clicking\r\n# the 'Run App' button above.\r\n#\r\n# shinylive::export(appdir = \".\", destdir = \"docs\")\r\nsource(\"https://raw.githubusercontent.com/clazinusveijer/shinylive_BIA/refs/heads/main/run_simulation.R\")\r\n\r\nif (!require('pacman')) install.packages('pacman'); library(pacman) \r\n#p_load_gh(\"DARTH-git/darthtools\") \r\np_load(\"devtools\", \"dplyr\", \"scales\", \"ellipse\", \"ggplot2\", \"lazyeval\", \"igraph\", \"truncnorm\", \"ggraph\", \"reshape2\", \"stringr\", \"dampack\", \"matrixStats\")\r\nlibrary(shiny)\r\n\r\nui <- fluidPage(\r\n  \r\n  # Application title\r\n  titlePanel(\"Hospital-level Budget Impact Analysis (BIA) of FX06 in the treatment of ARDS patients\"),\r\n  \r\n  # Show a plot of the generated distribution\r\n  sidebarLayout(\r\n    sidebarPanel(\r\n      numericInput(\"input_n_i\", \"Enter number of ARDS patients per year:\", value = 20),\r\n      sliderInput(\"input_p_i_mild\", \"Set the proportion of mild ARDS patients:\", min = 0, max = 1, value = 0.3, step = 0.01),\r\n      sliderInput(\"input_p_i_moderate\", \"Set the proportion of moderate ARDS patients:\", min = 0, max = 1, value = 0.465, step = 0.01),\r\n      sliderInput(\"input_p_i_severe\", \"Set the proportion of severe ARDS patients:\", min = 0, max = 1, value = 0.234, step = 0.01),\r\n      sliderInput(\"input_r_i_MV\", \"Set the proportion of ARDS patients starting on mechanical ventilation:\", min = 0, max = 1, value = 0.856, step = 0.01),\r\n      \r\n      numericInput(\"input_c_trt\", \"Enter average treatment costs per day (EUR):\", value = 120),\r\n      numericInput(\"input_c_MV\", \"Enter daily costs of ICU stay with mechanical ventilation (EUR):\", value = 2225),\r\n      numericInput(\"input_c_ICU\", \"Enter daily costs of ICU stay without mechanical ventilation (EUR):\", value = 930),\r\n      numericInput(\"input_c_GW\", \"Enter daily costs of non-ICU stay (EUR):\", value = 420),\r\n      numericInput(\"input_c_REC\", \"Enter daily costs of rehabilitation (EUR):\", value = 350),\r\n      \r\n      sliderInput(\"modifier_mild_moderate\", \"Set the chance of reduced disease progression from mild to moderate ARDS for the treatment population:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      sliderInput(\"modifier_moderate_severe\", \"Set the chance of reduced disease progression from moderate to severe ARDS for the treatment population:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      sliderInput(\"modifier_mild_severe\", \"Set the chance of reduced disease progression from mild to severe ARDS for the treatment population:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      sliderInput(\"modifier_MV_ICU_mild\", \"Set the chance of discontinuation from mechanical ventilation for the treatment population with mild ARDS:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      sliderInput(\"modifier_MV_ICU_moderate\", \"Set the chance of discontinuation from mechanical ventilation for the treatment population with moderate ARDS:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      sliderInput(\"modifier_MV_ICU_severe\", \"Set the chance of discontinuation from mechanical ventilation for the treatment population with severe ARDS:\", min = 0, max = 1, value = 0.1, step = 0.01),\r\n      \r\n      actionButton(\"calculate\", \"Calculate\")),\r\n    mainPanel(\r\n      textOutput(\"tc_tot_soc\"),\r\n      textOutput(\"tc_tot_trt\"),\r\n      textOutput(\"bia_tot\"),\r\n      textOutput(\"tc_hat_soc\"),\r\n      textOutput(\"tc_hat_trt\"),\r\n      textOutput(\"bia_hat\"),\r\n      plotOutput(\"trace_plot_soc\"),\r\n      plotOutput(\"trace_plot_trt\"),\r\n      plotOutput(\"density_plot_soc\"),\r\n      plotOutput(\"density_plot_trt\")\r\n    )\r\n  )\r\n)\r\n\r\n# Define server logic required to draw a histogram\r\nserver <- function(input, output) {\r\n  #source(\"https://raw.githubusercontent.com/clazinusveijer/datasets_CEA_IXION/refs/heads/main/run_simulation.R\")\r\n  observeEvent(input$calculate, {\r\n    BIA <- run_simulation_st( n_i = input$input_n_i\r\n                              , p_i_mild = input$input_p_i_mild\r\n                              , p_i_moderate = input$input_p_i_moderate\r\n                              , p_i_severe = input$input_p_i_severe\r\n                              , r_i_MV = input$input_r_i_MV\r\n                              , c_trt  = input$input_c_trt\r\n                              , c_MV   = input$input_c_MV\r\n                              , c_ICU  = input$input_c_ICU\r\n                              , c_GW   = input$input_c_GW\r\n                              , c_REC  = input$input_c_REC\r\n                              , modifier_mild_moderate   = input$modifier_mild_moderate\r\n                              , modifier_moderate_severe = input$modifier_moderate_severe\r\n                              , modifier_mild_severe     = input$modifier_mild_severe\r\n                              , modifier_MV_ICU_mild     = input$modifier_MV_ICU_mild\r\n                              , modifier_MV_ICU_moderate = input$modifier_MV_ICU_moderate\r\n                              , modifier_MV_ICU_severe   = input$modifier_MV_ICU_severe\r\n    )\r\n    tc_tot_soc     <- round(BIA$outcomes_SoC$tc_tot, 2)\r\n    tc_tot_trt     <- round(BIA$outcomes_trt$tc_tot, 2)\r\n    bia_tot        <- round(BIA$outcomes_trt$tc_tot - BIA$outcomes_SoC$tc_tot, 2)\r\n    tc_hat_soc <- round(BIA$outcomes_SoC$tc_hat, 2)\r\n    tc_hat_trt <- round(BIA$outcomes_trt$tc_hat, 2)\r\n    bia_hat    <- round(BIA$outcomes_trt$tc_hat - BIA$outcomes_SoC$tc_hat, 2)\r\n    output$tc_tot_soc     <- renderText({ paste(\"Annual costs SoC:\", tc_tot_soc) })\r\n    output$tc_tot_trt     <- renderText({ paste(\"Annual costs FX06:\", tc_tot_trt) })\r\n    output$bia_tot        <- renderText({ paste(\"Annual Budget impact:\", bia_tot) })\r\n    output$tc_hat_soc <- renderText({ paste(\"Per patient costs SoC:\", tc_hat_soc) })\r\n    output$tc_hat_trt <- renderText({ paste(\"Per patient costs FX06:\", tc_hat_trt) })\r\n    output$bia_hat    <- renderText({ paste(\"Budget impact per patient:\", bia_hat) })\r\n    \r\n    output$density_plot_soc <- renderPlot(plot(density(BIA$outcomes_SoC$tc), main = paste(\"Total cost per person in Standard of Care\"), xlab = \"Cost (€)\"))\r\n    output$density_plot_trt <- renderPlot(plot(density(BIA$outcomes_trt$tc), main = paste(\"Total cost per person in FX06 treatment\"), xlab = \"Cost (€)\"))\r\n  })\r\n}\r\n\r\nshinyApp(ui = ui, server = server)\r\n\r\n","type":"text"},{"name":"BIA_FX06_ARDS.Rproj","content":"Version: 1.0\r\nProjectId: 17cfc057-d8c1-4007-b0a5-23a9e1f5230f\r\n\r\nRestoreWorkspace: Default\r\nSaveWorkspace: Default\r\nAlwaysSaveHistory: Default\r\n\r\nEnableCodeIndexing: Yes\r\nUseSpacesForTab: Yes\r\nNumSpacesForTab: 2\r\nEncoding: UTF-8\r\n\r\nRnwWeave: Sweave\r\nLaTeX: pdfLaTeX\r\n","type":"text"},{"name":"README.txt","content":[],"type":"text"}]
